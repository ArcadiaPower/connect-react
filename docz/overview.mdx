---
name: Overview
route: /
---

# Overview

This package is a React wrapper around Arcadia's utility connect service. It provides two ways to integrate the component into your React application - via hooks and via HoCs (higher order components).

## Installation

Via npm:

```
npm i @arcadia-eng/utility-connect-react
```

Via yarn:

```
yarn add @arcadia-eng/utility-connect-react
```

## Quick start

### Hook implementation

This is the recommended implementation strategy.

```javascript
import { useUtilityConnect } from '@arcadia/utility-connect-react';

const env = 'staging';
const accessToken = 'this_is_a_super_secret_token';

const CreateCredentials = props => {
  const data = props;

  const onEmit = ({ error, data }) => {
    if (error) {
      // handle submission error here
    } else if (data) {
      // handle submission response here
    }
  };

  const onOpen = () => {
    // optional - handle widget open here
  };

  const onClose = () => {
    // optional - handle widget close here
  };

  const callbacks = { onEmit, onOpen, onClose };

  const config = {
    env,
    accessToken,
    data,
    callbacks,
    scope: 'create',
  };

  const [{ loading, error }, open] = useUtilityConnect(config);

  if (error) {
    return <div>Failed to load credential widget: {error.message}</div>;
  }

  return (
    <button type="button" disabled={loading} onClick={() => open()}>
      Connect credentials
    </button>
  );
};

export default CreateCredentials;
```

### HoC implementation

We provide an HoC strategy in case you are using class components. Note that this implementation is still leveraging hooks under the hood.

```javascript
import { withUtilityConnect } from '@arcadia/utility-connect-react';

const config = {
  env: 'test',
  accessToken: 'this_is_a_super_secret_token',
};

class CreateCredentials extends React.Component {
  constructor(props) {
    super(props);
    const { userId, address, email, credentialSync } = props;
    this.data = { userId, address, email };
    this.credentialSync = credentialSync;
  }

  componentDidMount() {
    this.credentialSync.setData(this.data);
    this.credentialSync.setCallbacks({
      onEmit: this.onEmit,
      onOpen: this.onOpen,
      onClose: this.onClose,
    });
  }

  onEmit({ error, dadta }) {
    if (error) {
      // handle credential submission error here
    } else if (data) {
      // handle credential submission response here
    }
  }

  onOpen() {
    // optional - handle widget open here
  }

  onClose() {
    // optional - handle widget close here
  }

  render() {
    const { ready, error, open } = this.credentialSync;

    if (error) {
      return <div>Failed to load credential widget: {error.message}</div>;
    }

    return (
      <button type="button" disabled={ready} onClick={() => open()}>
        Connect credentials
      </button>
    );
  }
}

export default withUtilityConnect(CreateCredentials);
```
